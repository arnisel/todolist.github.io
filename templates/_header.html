<!-- Header include: shows page heading and quick action button -->
<div class="flex flex-wrap items-center justify-between gap-4 border-b border-border-light dark:border-border-dark pb-8 mb-8">
  <div class="flex min-w-[18rem] flex-col">
      <div class="flex items-center gap-4">
        <a href="{{ url_for('index') }}" class="flex items-center gap-4 no-underline">
          <img src="{{ url_for('static', filename='logo.jpeg') }}" alt="Logo" class="site-logo" />
          <div class="flex flex-col">
            <p class="text-text-light dark:text-text-dark text-2xl md:text-3xl font-black leading-tight tracking-tight">Hoş Geldiniz, {{ user_name }}!</p>
            <p class="text-text-muted-light dark:text-text-muted-dark text-sm md:text-base font-normal">İşte bugünün genel özeti.</p>
          </div>
        </a>
      </div>
    </div>
  <button class="js-open-new-task flex min-w-[84px] cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-lg h-12 px-5 bg-primary text-[#1A1A1A] text-base font-bold leading-normal tracking-wide shadow-soft hover:opacity-90 transition-opacity">
    <span class="material-symbols-outlined">add_circle</span>
    <span class="truncate">Hızlı Görev Ekle</span>
  </button>
</div>

<script>
(function () {
  const html = document.documentElement;
  const STORAGE_KEY = 'prefers-dark';

  function applyTheme(isDark) {
    html.classList.toggle('dark', isDark);
    try {
      localStorage.setItem(STORAGE_KEY, isDark ? '1' : '0');
    } catch (e) {}
  }

  // Sayfa ilk yüklenirken
  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved === '1') {
      html.classList.add('dark');
    } else if (saved === null) {
      // İlk kez gelen kullanıcı → sistem temasını kullan
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      applyTheme(prefersDark);
    }
  } catch (e) {}

  // GLOBAL toggle (her sayfada çalışır)
  document.addEventListener('click', function (e) {
    const btn = e.target.closest('.js-toggle-color');
    if (!btn) return;

    const isDark = !html.classList.contains('dark');
    applyTheme(isDark);
  });
})();
</script>

